<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vigenère Cipher</title>
    <link rel="preconnect" href="https://fonts.bunny.net" />
    <link
      href="https://fonts.bunny.net/css?family=atkinson-hyperlegible:400,400i,700,700i"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Atkinson Hyperlegible", sans-serif;
        text-align: center;
        background-color: #232323;
        color: #e8e8e8;
      }
      input,
      textarea {
        background-color: #2c2c2c;
        color: #e8e8e8;
        border: 1px solid #555;
      }
      button {
        cursor: pointer;
      }
      button:hover {
        opacity: 0.9;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center"
  >
    <div class="w-full max-w-md bg-gray-800 rounded-xl shadow-lg p-6 space-y-4">
      <h1
        class="text-xl font-semibold text-center text-gray-800 dark:text-gray-100"
      >
        Vigenère Cipher
      </h1>

      <!-- Plaintext -->
      <label for="plaintext" class="block mb-2 font-medium text-gray-200"
        >Plaintext</label
      >
      <textarea
        id="plaintext"
        placeholder="Enter text..."
        class="w-full h-24 p-3 rounded-md bg-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"
      ></textarea>

      <!-- Key -->
      <label for="key" class="block mb-2 font-medium text-gray-200">Key</label>
      <input
        type="text"
        id="key"
        placeholder="Enter key"
        class="w-full p-2 mb-4 rounded-md bg-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <div class="flex justify-between mb-4">
        <button
          id="encryptBtn"
          class="px-4 py-2 bg-blue-600 text-white rounded"
        >
          Encrypt
        </button>
        <button
          id="decryptBtn"
          class="px-4 py-2 bg-green-600 text-white rounded"
        >
          Decrypt
        </button>
      </div>

      <label class="block mb-2 font-medium" for="output">Output</label>
      <textarea
        id="output"
        class="w-full h-24 p-3 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
        rows="4"
        readonly
        placeholder="Result will appear here"
      ></textarea>
      <div><a href="./index.html">Link to Caesar</a></div>
    </div>

    <script>
      // Vigenère cipher logic
      function vigenereEncrypt(text, key) {
        text = text.toUpperCase();
        key = key.toUpperCase();
        let result = "";
        for (let i = 0, j = 0; i < text.length; i++) {
          const c = text.charCodeAt(i);
          if (c >= 65 && c <= 90) {
            result += String.fromCharCode(
              ((c - 65 + (key.charCodeAt(j % key.length) - 65)) % 26) + 65
            );
            j++;
          } else {
            result += text[i];
          }
        }
        return result;
      }

      function vigenereDecrypt(text, key) {
        text = text.toUpperCase();
        key = key.toUpperCase();
        let result = "";
        for (let i = 0, j = 0; i < text.length; i++) {
          const c = text.charCodeAt(i);
          if (c >= 65 && c <= 90) {
            result += String.fromCharCode(
              ((c - 65 - (key.charCodeAt(j % key.length) - 65) + 26) % 26) + 65
            );
            j++;
          } else {
            result += text[i];
          }
        }
        return result;
      }

      document.getElementById("encryptBtn").addEventListener("click", () => {
        const text = document.getElementById("plaintext").value;
        const key = document.getElementById("key").value;
        document.getElementById("output").value = vigenereEncrypt(text, key);
      });

      document.getElementById("decryptBtn").addEventListener("click", () => {
        const text = document.getElementById("plaintext").value;
        const key = document.getElementById("key").value;
        document.getElementById("output").value = vigenereDecrypt(text, key);
      });
    </script>
  </body>
</html>
